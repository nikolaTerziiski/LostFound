# Lost & Found - Платформа за изгубени и намерени вещи

Това е уеб приложение, създадено с Flask, което цели да улесни намирането и връщането на изгубени вещи чрез система за публикуване и търсене на обяви.

## Основни функционалности

* **Управление на обяви:** Създаване, редактиране и изтриване на обяви за изгубени или намерени вещи.
* **Богато съдържание:** Обявите включват заглавие, описание, категория, град, дата и възможност за качване на множество снимки.
* **Интерактивна карта:** Визуализация на всички активни обяви на карта (с Leaflet.js). При създаване на обява, потребителят може да избере точна локация чрез плъзгане на маркер.
* **Търсене и филтриране:** Мощно търсене по ключова дума, както и филтриране по категория и град.
* **Потребителски роли:**
    * **Гост:** Може да разглежда и търси обяви.
    * **Регистриран потребител:** Може да създава и управлява собствените си обяви, да вижда контактната информация и да оставя коментари.
    * **Администратор:** Има достъп до административен панел за управление на всички потребители и обяви.
* **Имейл нотификации:** Потребителите могат да се абонират за известия при публикуване на нова обява в избран от тях град или категория.

## Технологии

* **Backend:** Python, Flask
* **База данни:** SQLAlchemy ORM, Flask-Migrate (с поддръжка на SQLite и PostgreSQL)
* **Frontend:** HTML, CSS, Bootstrap 5, JavaScript
* **Карти:** Leaflet.js & OpenStreetMap
* **Форми:** Flask-WTF
* **Аутентикация:** Flask-Login
* **Инструменти за качество на кода:** `mypy` за статичен типов анализ, `pylint` за спазване на PEP-8.
* **Тестове:** `pytest` и `pytest-cov`

##️ Инсталация

Следвайте тези стъпки, за да стартирате проекта локално:

**1. Клонирайте репозиторито:**
```bash
git clone [https://github.com/nikolaterziiski/lostfound.git](https://github.com/nikolaterziiski/lostfound.git)
cd lostfound
```

**2. Създайте и активирайте виртуална среда:**
```bash
# За Windows
python -m venv venv
venv\Scripts\activate

# За macOS/Linux
python3 -m venv venv
source venv/bin/activate
```

**3. Инсталирайте зависимостите:**
```bash
pip install -r requirements.txt
```

**4. Конфигурирайте променливите на средата:**
Създайте файл с име `.env` в главната директория на проекта. Можете да копирате съдържанието на `.flaskenv` и да го допълните. Файлът трябва да съдържа поне:
```
FLASK_APP=main.py
FLASK_ENV=development
SECRET_KEY=сложете_някакъв_много_таен_ключ_тук

# Конфигурация за мейл сървър (по желание, за нотификации)
MAIL_SERVER=smtp.gmail.com
MAIL_PORT=587
MAIL_USERNAME=your-email@gmail.com
MAIL_PASSWORD=your-google-app-password
```
**5.0 Стана проблем при финално тестване и има разминаване между HEAD миграциите, моля да се изпълнят следните команди:**
```bash
ri .\migrations -r -fo
Remove-Item -Force .\instance\lostfound.db
flask db init
flask db migrate -m "initial schema"
```
**5. Инициализирайте базата данни:**
Изпълнете миграциите, за да създадете всички таблици в базата данни.
```bash
flask db upgrade
```

**6. Заредете първоначални данни (по желание):**
За да имате данни, с които да тествате (градове, категории, админ потребител), изпълнете скрипта:
```bash
python seed.py
```
*Администраторският акаунт е: `admin@admin.com` с парола `admin`.*

**7. Стартирайте приложението:**
```bash
flask run
```
Приложението ще бъде достъпно на `http://127.0.0.1:5000`.

## ✅ Стартиране на тестовете

За да изпълните автоматизираните тестове, използвайте `pytest`:
```bash
pytest
```

За да видите покритието на кода от тестовете:
```bash
pytest --cov=src
```